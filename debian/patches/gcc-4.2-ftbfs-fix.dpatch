#! /bin/sh /usr/share/dpatch/dpatch-run
## gcc-4.2-ftbfs-fix.dpatch by Matthijs Mohlmann <matthijs@cacholong.nl>
##
## All lines beginning with `## DP:' are a description of the patch.
## DP: No description.

@DPATCH@
diff -urNad trunk~/recursor_cache.cc trunk/recursor_cache.cc
--- trunk~/recursor_cache.cc	2007-07-15 17:07:30.000000000 +0200
+++ trunk/recursor_cache.cc	2007-07-15 17:08:17.688738676 +0200
@@ -10,7 +10,7 @@
 
 #include "config.h"
 
-#ifdef GCC_SKIP_LOCKING
+/*#ifdef GCC_SKIP_LOCKING
 #include <bits/atomicity.h>
 // This code is ugly but does speedup the recursor tremendously on multi-processor systems, and even has a large effect (20, 30%) on uniprocessor 
 namespace __gnu_cxx
@@ -31,7 +31,7 @@
     *__mem+=__val;
   }
 }
-#endif
+#endif*/
 
 string simpleCompress(const string& label)
 {
